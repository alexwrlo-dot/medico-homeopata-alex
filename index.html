<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#e0e5ec">
    <meta name="description" content="Medicina Integrativa y Forense - Dr. Vitalidad">
    <title>Vitalidad & Ciencia | Inicio</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js" defer></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800&display=swap" rel="stylesheet">
    
    <style>
        /* --- ESTILOS NEUMORFISMO --- */
        :root { --bg: #e0e5ec; --text: #4a5568; --primary: #06b6d4; --secondary: #f43f5e; --grad: linear-gradient(135deg, #06b6d4, #3b82f6); --neu-out: 8px 8px 16px #a3b1c6, -8px -8px 16px #ffffff; --neu-in: inset 6px 6px 10px #a3b1c6, inset -6px -6px 10px #ffffff; --radius: 20px; }
        * { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
        body { font-family:'Nunito', sans-serif; background:var(--bg); color:var(--text); padding-bottom:90px; overflow-x:hidden; }
        
        .neu-card { background:var(--bg); border-radius:var(--radius); box-shadow:var(--neu-out); padding:20px; margin-bottom:20px; border:1px solid rgba(255,255,255,0.4); }
        .neu-btn { display:inline-flex; align-items:center; justify-content:center; padding:12px 20px; border-radius:50px; background:var(--bg); box-shadow:var(--neu-out); color:var(--primary); font-weight:800; text-decoration:none; border:none; cursor:pointer; transition:0.2s; }
        .neu-btn.primary { background:var(--grad); color:white; }
        .neu-btn:active { box-shadow:var(--neu-in); transform:scale(0.95); }
        
        /* Nav */
        .nav-bar { position:fixed; bottom:20px; left:50%; transform:translateX(-50%); width:90%; max-width:400px; background:var(--bg); border-radius:30px; box-shadow:var(--neu-out); display:flex; justify-content:space-evenly; padding:10px 0; z-index:1000; }
        .nav-item { color:#a0aec0; font-size:1.3rem; width:45px; height:45px; display:flex; align-items:center; justify-content:center; border-radius:50%; text-decoration:none; transition:0.3s; }
        .nav-item.active { color:var(--secondary); box-shadow:var(--neu-in); }

        /* Modal */
        .modal-overlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(224,229,236,0.95); z-index:2000; display:none; justify-content:center; align-items:center; opacity:0; transition:0.3s; }
        .modal-overlay.show { display:flex; opacity:1; }
        .modal-content { background:var(--bg); width:90%; max-width:800px; max-height:90vh; border-radius:30px; box-shadow:var(--neu-out); padding:25px; overflow-y:auto; position:relative; }
        .close-btn { position:sticky; top:0; float:right; width:40px; height:40px; border-radius:50%; background:var(--bg); box-shadow:var(--neu-out); display:flex; align-items:center; justify-content:center; color:var(--secondary); cursor:pointer; }
        #modal-body img { max-width:100%; border-radius:15px; margin:15px 0; }
        
        .container { max-width:900px; margin:0 auto; padding:20px; }
        .grid { display:grid; grid-template-columns:1fr; gap:20px; }
        .bg-decor { position:fixed; width:100%; height:100%; z-index:-1; pointer-events:none; }
        .blob { position:absolute; border-radius:50%; filter:blur(80px); opacity:0.4; }
        
        @media(min-width:768px){ .grid{grid-template-columns:repeat(3,1fr);} body{padding-top:80px;} .nav-bar{top:20px; bottom:auto;} }
    </style>
</head>
<body>
    <div class="bg-decor">
        <div class="blob" style="top:-10%; right:-10%; width:300px; height:300px; background:#06b6d4;"></div>
        <div class="blob" style="bottom:10%; left:-10%; width:300px; height:300px; background:#f43f5e;"></div>
    </div>

    <nav class="nav-bar">
        <a href="#inicio" class="nav-item active"><i class="fas fa-home"></i></a>
        <a href="#blog-preview" class="nav-item"><i class="fas fa-book-medical"></i></a>
        <a href="#tienda" class="nav-item"><i class="fas fa-shopping-cart"></i></a>
        <a href="#contacto" class="nav-item"><i class="fas fa-envelope"></i></a>
    </nav>

    <div id="modal" class="modal-overlay">
        <div class="modal-content">
            <div class="close-btn" onclick="closeModal()"><i class="fas fa-times"></i></div>
            <div id="modal-body"></div>
        </div>
    </div>

    <div class="container">
        <section id="inicio" style="text-align:center; padding:40px 0;">
            <div class="neu-card" style="display:inline-block; border-radius:50%; padding:10px;">
                <img src="https://images.unsplash.com/photo-1612349317150-e413f6a5b16d?w=150" style="width:100px; height:100px; border-radius:50%; object-fit:cover;">
            </div>
            <h1 style="margin:15px 0; color:#2d3748;">Dr. <span style="color:var(--primary);">Vitalidad</span></h1>
            <p style="margin-bottom:25px;">Medicina Integrativa & Forense</p>
            <a href="#contacto" class="neu-btn primary">Agendar Cita</a>
        </section>

        <section id="blog-preview">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                <h2>Últimos Artículos</h2>
                <a href="blog.html" style="color:var(--primary); font-weight:bold; text-decoration:none;">Ver Todo →</a>
            </div>
            <div id="blog-list" class="grid">
                <div class="neu-card"><i class="fas fa-sync fa-spin"></i> Cargando...</div>
            </div>
            <a href="blog.html" class="neu-btn secondary" style="width:100%; margin-top:20px; text-align:center;">Biblioteca Completa</a>
        </section>

        <section id="tienda" style="margin-top:40px;">
            <h2>Tienda</h2>
            <div class="grid">
                <div class="neu-card" style="text-align:center;">
                    <h3>Neuro-Audio</h3><span style="display:block; font-weight:bold; margin:10px;">$19.99</span>
                    <button class="neu-btn" onclick="buy('Neuro-Audio', '19.99')">Comprar</button>
                </div>
                <div class="neu-card" style="text-align:center;">
                    <h3>Botiquín PDF</h3><span style="display:block; font-weight:bold; margin:10px;">$9.99</span>
                    <button class="neu-btn" onclick="buy('Guía PDF', '9.99')">Comprar</button>
                </div>
                <div class="neu-card" style="text-align:center;">
                    <h3>Consulta</h3><span style="display:block; font-weight:bold; margin:10px;">$45.00</span>
                    <button class="neu-btn" onclick="buy('Consulta', '45.00')">Agendar</button>
                </div>
            </div>
        </section>

        <section id="contacto" style="margin-top:40px;">
            <h2>Contacto</h2>
            <div class="neu-card">
                <form action="https://formspree.io/f/xgoweoqp" method="POST">
                    <input type="text" name="name" placeholder="Nombre" style="width:100%; padding:10px; margin-bottom:10px; border:none; background:var(--bg); box-shadow:var(--neu-in); border-radius:10px;">
                    <input type="email" name="email" placeholder="Email" style="width:100%; padding:10px; margin-bottom:10px; border:none; background:var(--bg); box-shadow:var(--neu-in); border-radius:10px;">
                    <textarea name="msg" rows="3" placeholder="Mensaje" style="width:100%; padding:10px; margin-bottom:10px; border:none; background:var(--bg); box-shadow:var(--neu-in); border-radius:10px;"></textarea>
                    <button type="submit" class="neu-btn primary" style="width:100%;">Enviar</button>
                </form>
            </div>
        </section>
    </div>

    <script>
        const USER = "alexwrlo-dot"; 
        const REPO = "medico-homeopata-alex";
        let posts = [];

        async function init() {
            try {
                const res = await fetch(`https://api.github.com/repos/${USER}/${REPO}/contents/blog`);
                const files = await res.json();
                const md = files.filter(f => f.name.endsWith('.md')).slice(0, 3);
                
                const list = document.getElementById('blog-list');
                list.innerHTML = "";
                
                if(md.length === 0) { list.innerHTML = "<p>Próximamente.</p>"; return; }

                for(let i=0; i<md.length; i++) {
                    const txt = await (await fetch(md[i].download_url)).text();
                    const parts = txt.split('---');
                    let title = md[i].name.replace('.md','');
                    let body = txt;
                    if(parts.length >= 3) {
                        const m = parts[1].match(/title:\s*(.*)/);
                        if(m) title = m[1].replace(/["']/g,"");
                        body = parts.slice(2).join('---');
                    }
                    posts.push({title, body});
                    
                    list.innerHTML += `
                        <div class="neu-card">
                            <h3 style="color:var(--primary); margin-bottom:10px;">${title}</h3>
                            <div style="font-size:0.8rem; height:60px; overflow:hidden; margin-bottom:10px;">
                                ${marked.parse(body).replace(/<[^>]*>?/gm,'').substring(0,80)}...
                            </div>
                            <button class="neu-btn" style="width:100%; font-size:0.8rem;" onclick="openPost(${i})">Leer</button>
                        </div>`;
                }
            } catch(e) { document.getElementById('blog-list').innerHTML = "<p>Error de conexión.</p>"; }
        }

        function openPost(i) {
            document.getElementById('modal-body').innerHTML = `<h1>${posts[i].title}</h1>` + marked.parse(posts[i].body);
            document.getElementById('modal').classList.add('show');
        }
        function closeModal() { document.getElementById('modal').classList.remove('show'); }
        function buy(p, pr) { window.open(`https://wa.me/5215555555555?text=Hola, quiero: ${p} ($${pr})`); }

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
